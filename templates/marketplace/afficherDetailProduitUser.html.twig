{% extends 'base-front.html.twig' %}
{% block titre%}
<title>Boutique</title>
{% endblock %}
{% block body%} 
<!-- Content -->
 <!-- Content -->
 <div class="page-content bg-white">
    <!-- inner page banner -->
    <div class="dlab-bnr-inr overlay-black-middle" style="background-image:url(../images/background/slide11.jpg);">
        <div class="container">
            <div class="dlab-bnr-inr-entry">
                <h1 class="text-white">Détails Produit</h1>
            </div>
        </div>
    </div>
    <!-- inner page banner END -->
    <!-- Breadcrumb row -->
    <div class="breadcrumb-row">
        <div class="container">
            <ul class="list-inline">
                <li><a href="{{path('resume')}}">Accueil</a></li>
                <li>Détails Produit</li>
            </ul>
        </div>
    </div>
    <!-- Breadcrumb row END -->
 </div>

 <!-- Title separator style 9 -->


   
 <div class="section-head text-right">
     <h2 class="text-uppercase">Détails de {{p.getNomProd()}} </h2>
     
     <div class="dlab-separator-outer ">
         <div class="dlab-separator bg-primary style-skew"></div>
     </div>
     
 </div>




<!-- Title separator style 9 END -->
<!-- Product details -->
<div class="container woo-entry">
 <div class="row m-b30">
     <div class="col-lg-5 col-md-5">
         <div class="product-gallery on-show-slider"> 
             <div id="sync1" class="owl-carousel owl-theme owl-btn-center-lr m-b5 owl-btn-1 primary">
                 <div class="item">
                     <div class="mfp-gallery">
                         <div class="dlab-box">
                             <div class="dlab-thum-bx dlab-img-overlay1 ">
                                 <img src="http://localhost/images/{{p.getImage}}" alt="">
                                 <div class="overlay-bx">
                                     <div class="overlay-icon">
                                        
                                   </div>
                                 </div>
                             </div>
                         </div>
                     </div>
                 </div>
          
             </div>
             
           
         </div>
     </div>
     <div class="col-lg-7 col-md-7">
         <div class="sticky-top">
            {{ form_start(f,{'attr': {'novalidate': 'novalidate'}} ) }}
                 <div class="dlab-post-title ">
                     <h2 class="post-title"><a href="#">{{p.getNomProd()}}</a></h2>
                     <p class="m-b10">{{p.getDescriptionProd()}}</p>
                     <div class="dlab-divider bg-gray tb15"><i class="icon-dot c-square"></i></div>
                 </div>
                 <div class="relative">
                     <h3 class="m-tb10">{{p.getPrixProd()}} DT</h3>
                
                     <div class="shop-item-rating">
                         <span class="rating-bx"> 
                           <button class="site-button radius-no"  type="SubmitType"><i class="ti-shopping-cart"></i>Ajouter au Panier</button>
                         </span>
                       
                     </div>
                 </div>
                 <div class="shop-item-tage">


                     <span>Categorie : </span>
                     <a href="#"> {{p.getCategorie().getNomCategorie()}}</a>
                     <li>Type de categorie:  {{p.getCategorie().getTypeCategorie()}}</li>
                     
                 </div>
                 <div class="dlab-divider bg-gray tb15"><i class="icon-dot c-square"></i></div>
                 <div class="row">
                     <div class="m-b30 col-lg-6 col-md-6 col-sm-6">
                         <h6>Donner la Quantite</h6>
                         <div class="quantity btn-quantity style-1">
                             {{ form_widget(f.quantite , {'attr': {'type' :'text','value' : '1','name' : 'demo_vertical2','class': 'form-control'}}) }}
                         </div>     
                     </div>
                     <div class="col-lg-12">
                        <div class="alert alert-danger"> <strong>{{ form_errors(f.quantite, {'attr': {'style': 'color: #FF0000 !important;','class': 'form-control'}}) }} </strong> </div>    
                    </div>
                 </div>
                {{ form_end(f) }}
              
                {% for message in app.flashes('error') %}
                <div class="alert alert-danger"> <strong><i class="fas fa-times"></i> Erreur!</strong> {{ message }} </div>
                {% endfor %}
                
         </div>
     </div>
 </div>
     <!-- Title separator style 3 END -->
         <!-- Title separator style 4 -->
         <div class="p-a30 bg-white m-b40">
             <div class="section-head text-center">
                 <h2 class="text-uppercase">Les produits associés à notre offre</h2>
                 <div class="dlab-separator-outer ">
                     <div class="dlab-separator bg-primary style-liner"></div>
                 </div>
                 <p>Il y a beaucoup d'autres produits que D&R offre. D&R est le principal fournisseur tunisien de pièces automobiles et de produits pour les fans et les supporters de Drift! Avec plus de 250 produits de haute qualité.</p>
             </div>
             <div class="section-content"></div>
         </div>
         <!-- Title separator style 4 END -->
 <div class="row">
     <div class="col-lg-12">
         <h5 class="m-b20">Related Products</h5>
         <div class="img-carousel-content owl-carousel owl-btn-center-lr owl-btn-1 primary">
             {% for i in s %}
             <div class="item">
                 <div class="item-box">
                     <div class="item-img">
                         <img src="http://localhost/images/{{i.getImage}}" alt="">
                         <div class="item-info-in">
                             <ul>
                                 <li><a href="#"><i class="ti-shopping-cart"></i></a></li>
                                 <li><a href="{{path('affichedetail',{'id':i.id})}}"><i class="ti-eye"></i></a></li>
                                 <li><a href="#"><i class="ti-heart"></i></a></li>
                             </ul>
                         </div>
                     </div>
                     <div class="item-info text-center text-black p-a10">
                         
                         <h6 class="item-title text-uppercase font-weight-500"><a href="#">{{i.getNomProd()}}</a></h6>
                         <ul class="item-review">
                             <li><i class="fas fa-star"></i></li>
                             <li><i class="fas fa-star"></i></li>
                             <li><i class="fas fa-star"></i></li>
                             <li><i class="fas fa-star-half-alt"></i></li>
                             <li><i class="far fa-star"></i></li>
                         </ul>
                         <h4 class="item-price"><span class="text-primary">{{i.getPrixProd()}} Dt</span></h4>
                     </div>
                 </div>
             </div>
             {% endfor%}
         </div>
     </div>
 </div>

</div>
</div>
{% block js %}
<!-- JavaScript  files ========================================= -->
<script src="{{asset('js/jquery.min.js')}}"></script><!-- JQUERY.MIN JS -->
<script src="{{asset('plugins/bootstrap/js/bootstrap.bundle.min.js')}}"></script><!-- BOOTSTRAP.MIN JS -->
<script src="{{asset('plugins/bootstrap-select/bootstrap-select.min.js')}}"></script><!-- FORM JS -->
<script src="{{asset('plugins/bootstrap-touchspin/jquery.bootstrap-touchspin.js')}}"></script><!-- FORM JS -->
<script src="{{asset('plugins/magnific-popup/magnific-popup.js')}}"></script><!-- MAGNIFIC POPUP JS -->
<script src="{{asset('plugins/counter/waypoints-min.js')}}"></script><!-- WAYPOINTS JS -->
<script src="{{asset('plugins/counter/counterup.min.js')}}"></script><!-- COUNTERUP JS -->
<script src="{{asset('plugins/imagesloaded/imagesloaded.js')}}"></script><!-- IMAGESLOADED -->
<script src="{{asset('plugins/masonry/masonry-3.1.4.js')}}"></script><!-- MASONRY -->
<script src="{{asset('plugins/masonry/masonry.filter.js')}}"></script><!-- MASONRY -->
<script src="{{asset('plugins/owl-carousel/owl.carousel.js')}}"></script><!-- OWL SLIDER -->
<script src="{{asset('plugins/rangeslider/rangeslider.js')}}" ></script><!-- Rangeslider -->
<script src="{{asset('js/custom.min.js')}}"></script><!-- CUSTOM FUCTIONS  -->
<script src="{{asset('js/dz.carousel.min.js')}}"></script><!-- SORTCODE FUCTIONS  -->

<script src="{{asset('plugins/lightgallery/js/lightgallery-all.js')}}"></script><!-- LIGHT GALLERY -->
<script src="{{asset('js/dz.ajax.js')}}"></script><!-- CONTACT JS -->
<script src="{{asset('plugins/switcher/js/switcher.js')}}"></script><!-- SWITCHER -->
<!-- REVOLUTION JS FILES -->
<script src="{{asset('plugins/revolution/js/jquery.themepunch.tools.min.js')}}"></script>
<script src="{{asset('plugins/revolution/js/jquery.themepunch.revolution.min.js')}}"></script>
<!-- Slider revolution 5.0 Extensions  (Load Extensions only on Local File Systems !  The following part can be removed on Server for On Demand Loading) -->
<script src="{{asset('plugins/revolution/js/extensions/revolution.extension.actions.min.js')}}"></script>
<script src="{{asset('plugins/revolution/js/extensions/revolution.extension.carousel.min.js')}}"></script>
<script src="{{asset('plugins/revolution/js/extensions/revolution.extension.kenburn.min.js')}}"></script>
<script src="{{asset('plugins/revolution/js/extensions/revolution.extension.layeranimation.min.js')}}"></script>
<script src="{{asset('plugins/revolution/js/extensions/revolution.extension.migration.min.js')}}"></script>
<script src="{{asset('plugins/revolution/js/extensions/revolution.extension.navigation.min.js')}}"></script>
<script src="{{asset('plugins/revolution/js/extensions/revolution.extension.parallax.min.js')}}"></script>
<script src="{{asset('plugins/revolution/js/extensions/revolution.extension.slideanims.min.js')}}"></script>
<script src="{{asset('plugins/revolution/js/extensions/revolution.extension.video.min.js')}}"></script>
<script src="{{asset('js/rev.slider.js')}}"></script>
<script>
jQuery(document).ready(function() {
'use strict';
dz_rev_slider_4();
});	/*ready*/
$(document).ready(function() {

var sync1 = $("#sync1");
var sync2 = $("#sync2");
var slidesPerPage = 4; //globaly define number of elements per page
var syncedSecondary = true;

   sync1.owlCarousel({
     items : 1,
     slideSpeed : 2000,
     nav: true,
     autoplay: false,
     dots: false,
     loop: true,
     responsiveRefreshRate : 200,
     navText: ['<i class="fas fa-chevron-left"></i>', '<i class="fas fa-chevron-right"></i>'],
   }).on('changed.owl.carousel', syncPosition);

   sync2.on('initialized.owl.carousel', function () {
       sync2.find(".owl-item").eq(0).addClass("current");
     }).owlCarousel({
     items : slidesPerPage,
     dots: false,
     nav: false,
     margin:5,
     smartSpeed: 200,
     slideSpeed : 500,
     slideBy: slidesPerPage, //alternatively you can slide by 1, this way the active slide will stick to the first item in the second carousel
     responsiveRefreshRate : 100
   }).on('changed.owl.carousel', syncPosition2);

function syncPosition(el) {
 //if you set loop to false, you have to restore this next line
 //var current = el.item.index;
 
 //if you disable loop you have to comment this block
 var count = el.item.count-1;
 var current = Math.round(el.item.index - (el.item.count/2) - .5);
 
 if(current < 0) {
   current = count;
 }
 if(current > count) {
   current = 0;
 }
 
 //end block

 sync2
   .find(".owl-item")
   .removeClass("current")
   .eq(current)
   .addClass("current");
 var onscreen = sync2.find('.owl-item.active').length - 1;
 var start = sync2.find('.owl-item.active').first().index();
 var end = sync2.find('.owl-item.active').last().index();
 
 if (current > end) {
   sync2.data('owl.carousel').to(current, 100, true);
 }
 if (current < start) {
   sync2.data('owl.carousel').to(current - onscreen, 100, true);
 }
}

function syncPosition2(el) {
 if(syncedSecondary) {
   var number = el.item.index;
   sync1.data('owl.carousel').to(number, 100, true);
 }
}

sync2.on("click", ".owl-item", function(e){
     e.preventDefault();
     var number = $(this).index();
     //sync1.data('owl.carousel').to(number, 300, true);
     
     sync1.data('owl.carousel').to(number, 300, true);
     
 });
});
</script>
{% endblock %}

{% endblock %}